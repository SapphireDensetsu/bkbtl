#summary Порты БК.
#labels Featured

= Порты БК =

== 177130 ==
Регистр управления КНГМД.
TODO

== 177132 ==
Регистр данных КНГМД.
TODO

== 177660 ==
Регистр состояния клавиатуры.
 * бит 6 -- разрешение прерывание от клавиатуры, "0" -- разрешено прерывание по вектору 060 либо 0274. Начальное состояние: "0".
 * бит 7 -- готовность: "1" -- в регистре данных клавиатуры (177662) готов код нажатой клавиши. Начальное состояние: "0".
 * другие биты: "0".

== 177662 ==
Регистр данных клавиатуры.
 * биты 0-6: код клавиши. Доступ только по чтению.
 * биты 8-11: (только БК-0011) палитра.
 * бит 14: разрешение прерывания по таймеру (50 Гц), "0" -- прерывание разрешено.
 * бит 15: (только БК-0011) текущий буфер экрана, "0" -- #5, "1" -- #6.

== 177664 ==
Регистр скроллинга.
 * биты 0-7: смещение скроллинга.
 * бит 9: сокращенный режим экрана, "0" -- сокращенный, "1" - полный экран.

== 177700 ==
Непонятно что.

== 177702 ==
Непонятно что.

== 177704 ==
Непонятно что.

== 177706 ==
Программируемый таймер -- регистр установки. Доступен по чтению и записи.

== 177710 ==
Программируемый таймер -- реверсивный счетчик. Доступен по чтению и записи.

== 177712 ==
Программируемый таймер -- регистр управления.
 * бит 0: "1" - остановка.
 * бит 1: начальная установка таймера.
 * бит 2: разрешение установки сигнала "конец счета".
 * бит 3: режим одновибратора
 * бит 4: запуск счетчика, "1" - считает
 * бит 5: делитель на 16, "1" - включен
 * бит 6: делитель на 4, "1" - включен
 * бит 7: флаг окончания счета, "1" - готовность
 * биты 8-15 не используются, "1".

== 177714 ==
Порт принтера, выводы на системном разъеме.

=== Принтер ===
TODO

=== Covox (запись) ===
TODO

=== Джойстик (чтение) ===
 * бит 0 -- кнопка 1
 * бит 1 -- кнопка 2
 * бит 2 -- кнопка 3
 * бит 3 -- кнопка 4
 * бит 4 -- вправо
 * бит 5 -- вниз
 * бит 9 -- влево
 * бит 10 -- вверх

== 177716 ==
Системный регистр.

По чтению:
 * бит 2: признак записи в системный регистр
 * бит 5: данные с магнитофона
 * бит 6: нажатие клавиши
 * бит 7: TODO
 * биты 8-15: адрес начального пуска, 140000.

По записи, бит 11 = "0":
 * биты 2, 5, 6: данные на магнитофон.
 * бит 7: включение двигателя магнитофона.
 * бит 11: "0"
 * бит 12: разрешение прерывания по клавише СТОП

По записи, бит 11 = "1":
 * биты 0,1, 3,4,5,6: (БК-0011) страница ППЗУ
 * биты 8,9,10: (БК-0011) окно ОЗУ #1
 * бит 11: "1"
 * биты 12,13,14: (БК-0011) окно ОЗУ #0